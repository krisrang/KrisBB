/*!
 * Lo-Dash v0.4.2 <http://lodash.com>
 * Copyright 2012 John-David Dalton <http://allyoucanleet.com/>
 * Based on Underscore.js 1.3.3, copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * <http://documentcloud.github.com/underscore>
 * Available under MIT license <http://lodash.com/license>
 */

//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.

//     Backbone may be freely distributed under the MIT license.

// Backbone.Marionette v0.9.6
//
// Copyright (C)2012 Derick Bailey, Muted Solutions, LLC
// Distributed Under MIT License
//
// Documentation and Full License Available at:
// http://github.com/derickbailey/backbone.marionette

(function(window,undefined){function lodash(value){return new LoDash(value)}function LoDash(value){if(value&&value._wrapped)return value;this._wrapped=value}function cachedContains(array,fromIndex,largeSize){fromIndex||(fromIndex=0);var length=array.length,isLarge=length-fromIndex>=(largeSize||30),cache=isLarge?{}:array;if(isLarge){var key,index=fromIndex-1;while(++index<length)key=array[index]+"",(hasOwnProperty.call(cache,key)?cache[key]:cache[key]=[]).push(array[index])}return function(value){if(isLarge){var key=value+"";return hasOwnProperty.call(cache,key)&&indexOf(cache[key],value)>-1}return indexOf(cache,value,fromIndex)>-1}}function createIterator(){var object,prop,value,index=-1,length=arguments.length,data={bottom:"",exit:"",init:"",top:"",arrayBranch:{beforeLoop:""},objectBranch:{beforeLoop:""}};while(++index<length){object=arguments[index];for(prop in object)value=(value=object[prop])==null?"":value,/beforeLoop|inLoop/.test(prop)?(typeof value=="string"&&(value={array:value,object:value}),data.arrayBranch[prop]=value.array,data.objectBranch[prop]=value.object):data[prop]=value}var args=data.args,firstArg=/^[^,]+/.exec(args)[0];data.firstArg=firstArg,data.hasDontEnumBug=hasDontEnumBug,data.isKeysFast=isKeysFast,data.shadowed=shadowed,data.useHas=data.useHas!==!1,data.useStrict=data.useStrict!==!1,"noCharByIndex"in data||(data.noCharByIndex=noCharByIndex),data.exit||(data.exit="if (!"+firstArg+") return result");if(firstArg!="collection"||!data.arrayBranch.inLoop)data.arrayBranch=null;var factory=Function("arrayClass, bind, compareAscending, funcClass, hasOwnProperty, identity, iteratorBind, objectTypes, nativeKeys, propertyIsEnumerable, slice, stringClass, toString","return function("+args+") {\n"+iteratorTemplate(data)+"\n}");return factory(arrayClass,bind,compareAscending,funcClass,hasOwnProperty,identity,iteratorBind,objectTypes,nativeKeys,propertyIsEnumerable,slice,stringClass,toString)}function compareAscending(a,b){return a=a.criteria,b=b.criteria,a===undefined?1:b===undefined?-1:a<b?-1:a>b?1:0}function detokenize(match,index){return tokenized[index]}function escapeStringChar(match){return"\\"+stringEscapes[match]}function escapeHtmlChar(match){return htmlEscapes[match]}function iteratorBind(func,thisArg){return function(value,index,object){return func.call(thisArg,value,index,object)}}function noop(){}function tokenizeEscape(match,value){if(reComplexDelimiter.test(value))return"<e%-"+value+"%>";var index=tokenized.length;return tokenized[index]="' +\n__e("+value+") +\n'",token+index}function tokenizeEvaluate(match,value,escapeValue,interpolateValue){var index=tokenized.length;return value?tokenized[index]="';\n"+value+";\n__p += '":escapeValue?tokenized[index]="' +\n__e("+escapeValue+") +\n'":interpolateValue&&(tokenized[index]="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),token+index}function tokenizeInterpolate(match,value){if(reComplexDelimiter.test(value))return"<e%="+value+"%>";var index=tokenized.length;return tokenized[index]="' +\n((__t = ("+value+")) == null ? '' : __t) +\n'",token+index}function reduceRight(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var length=collection.length,noaccum=arguments.length<3;thisArg&&(callback=iteratorBind(callback,thisArg));if(length===length>>>0){var iteratee=noCharByIndex&&toString.call(collection)==stringClass?collection.split(""):collection;length&&noaccum&&(accumulator=iteratee[--length]);while(length--)accumulator=callback(accumulator,iteratee[length],length,collection);return accumulator}var prop,props=keys(collection);length=props.length,length&&noaccum&&(accumulator=collection[props[--length]]);while(length--)prop=props[length],accumulator=callback(accumulator,collection[prop],prop,collection);return accumulator}function toArray(collection){if(!collection)return[];if(collection.toArray&&toString.call(collection.toArray)==funcClass)return collection.toArray();var length=collection.length;return length===length>>>0?(noArraySliceOnStrings?toString.call(collection)==stringClass:typeof collection=="string")?collection.split(""):slice.call(collection):values(collection)}function compact(array){var result=[];if(!array)return result;var index=-1,length=array.length;while(++index<length)array[index]&&result.push(array[index]);return result}function difference(array){var result=[];if(!array)return result;var index=-1,length=array.length,flattened=concat.apply(result,arguments),contains=cachedContains(flattened,length);while(++index<length)contains(array[index])||result.push(array[index]);return result}function first(array,n,guard){if(array)return n==null||guard?array[0]:slice.call(array,0,n)}function flatten(array,shallow){var result=[];if(!array)return result;var value,index=-1,length=array.length;while(++index<length)value=array[index],isArray(value)?push.apply(result,shallow?value:flatten(value)):result.push(value);return result}function indexOf(array,value,fromIndex){if(!array)return-1;var index=-1,length=array.length;if(fromIndex){if(typeof fromIndex!="number")return index=sortedIndex(array,value),array[index]===value?index:-1;index=(fromIndex<0?Math.max(0,length+fromIndex):fromIndex)-1}while(++index<length)if(array[index]===value)return index;return-1}function initial(array,n,guard){return array?slice.call(array,0,-(n==null||guard?1:n)):[]}function intersection(array){var result=[];if(!array)return result;var value,index=-1,length=array.length,others=slice.call(arguments,1),cache=[];while(++index<length)value=array[index],indexOf(result,value)<0&&every(others,function(other,index){return(cache[index]||(cache[index]=cachedContains(other)))(value)})&&result.push(value);return result}function last(array,n,guard){if(array){var length=array.length;return n==null||guard?array[length-1]:slice.call(array,-n||length)}}function lastIndexOf(array,value,fromIndex){if(!array)return-1;var index=array.length;fromIndex&&typeof fromIndex=="number"&&(index=(fromIndex<0?Math.max(0,index+fromIndex):Math.min(fromIndex,index-1))+1);while(index--)if(array[index]===value)return index;return-1}function max(array,callback,thisArg){var computed=-Infinity,result=computed;if(!array)return result;var current,index=-1,length=array.length;if(!callback){while(++index<length)array[index]>result&&(result=array[index]);return result}thisArg&&(callback=iteratorBind(callback,thisArg));while(++index<length)current=callback(array[index],index,array),current>computed&&(computed=current,result=array[index]);return result}function min(array,callback,thisArg){var computed=Infinity,result=computed;if(!array)return result;var current,index=-1,length=array.length;if(!callback){while(++index<length)array[index]<result&&(result=array[index]);return result}thisArg&&(callback=iteratorBind(callback,thisArg));while(++index<length)current=callback(array[index],index,array),current<computed&&(computed=current,result=array[index]);return result}function range(start,end,step){step||(step=1),end==null&&(end=start||0,start=0);var index=-1,length=Math.max(0,Math.ceil((end-start)/step)),result=Array(length);while(++index<length)result[index]=start,start+=step;return result}function rest(array,n,guard){return array?slice.call(array,n==null||guard?1:n):[]}function shuffle(array){if(!array)return[];var rand,index=-1,length=array.length,result=Array(length);while(++index<length)rand=Math.floor(Math.random()*(index+1)),result[index]=result[rand],result[rand]=array[index];return result}function sortedIndex(array,value,callback,thisArg){if(!array)return 0;var mid,low=0,high=array.length;if(callback){thisArg&&(callback=bind(callback,thisArg)),value=callback(value);while(low<high)mid=low+high>>>1,callback(array[mid])<value?low=mid+1:high=mid}else while(low<high)mid=low+high>>>1,array[mid]<value?low=mid+1:high=mid;return low}function union(){var index=-1,result=[],flattened=concat.apply(result,arguments),length=flattened.length;while(++index<length)indexOf(result,flattened[index])<0&&result.push(flattened[index]);return result}function uniq(array,isSorted,callback,thisArg){var result=[];if(!array)return result;var computed,index=-1,length=array.length,seen=[];typeof isSorted=="function"&&(thisArg=callback,callback=isSorted,isSorted=!1),callback?thisArg&&(callback=iteratorBind(callback,thisArg)):callback=identity;while(++index<length){computed=callback(array[index],index,array);if(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0)seen.push(computed),result.push(array[index])}return result}function without(array){var result=[];if(!array)return result;var index=-1,length=array.length,contains=cachedContains(arguments,1,20);while(++index<length)contains(array[index])||result.push(array[index]);return result}function zip(array){if(!array)return[];var index=-1,length=max(pluck(arguments,"length")),result=Array(length);while(++index<length)result[index]=pluck(arguments,index);return result}function zipObject(keys,values){if(!keys)return{};var index=-1,length=keys.length,result={};values||(values=[]);while(++index<length)result[keys[index]]=values[index];return result}function after(n,func){return n<1?func():function(){if(--n<1)return func.apply(this,arguments)}}function bind(func,thisArg){function bound(){var args=arguments,thisBinding=thisArg;isFunc||(func=thisArg[methodName]),partialArgs.length&&(args=args.length?concat.apply(partialArgs,args):partialArgs);if(this instanceof bound){noop.prototype=func.prototype,thisBinding=new noop;var result=func.apply(thisBinding,args);return result&&objectTypes[typeof result]?result:thisBinding}return func.apply(thisBinding,args)}var methodName,isFunc=toString.call(func)==funcClass;if(!isFunc)methodName=thisArg,thisArg=func;else if(isBindFast||nativeBind&&arguments.length>2)return nativeBind.call.apply(nativeBind,arguments);var partialArgs=slice.call(arguments,2);return bound}function compose(){var funcs=arguments;return function(){var args=arguments,length=funcs.length;while(length--)args=[funcs[length].apply(this,args)];return args[0]}}function debounce(func,wait,immediate){function delayed(){timeoutId=null,immediate||func.apply(thisArg,args)}var args,result,thisArg,timeoutId;return function(){var isImmediate=immediate&&!timeoutId;return args=arguments,thisArg=this,clearTimeout(timeoutId),timeoutId=setTimeout(delayed,wait),isImmediate&&(result=func.apply(thisArg,args)),result}}function delay(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(undefined,args)},wait)}function defer(func){var args=slice.call(arguments,1);return setTimeout(function(){return func.apply(undefined,args)},1)}function memoize(func,resolver){var cache={};return function(){var prop=resolver?resolver.apply(this,arguments):arguments[0];return hasOwnProperty.call(cache,prop)?cache[prop]:cache[prop]=func.apply(this,arguments)}}function once(func){var result,ran=!1;return function(){return ran?result:(ran=!0,result=func.apply(this,arguments),result)}}function partial(func){var args=slice.call(arguments,1),argsLength=args.length;return function(){var result,others=arguments;return others.length&&(args.length=argsLength,push.apply(args,others)),result=args.length==1?func.call(this,args[0]):func.apply(this,args),args.length=argsLength,result}}function throttle(func,wait){function trailingCall(){lastCalled=new Date,timeoutId=null,func.apply(thisArg,args)}var args,result,thisArg,timeoutId,lastCalled=0;return function(){var now=new Date,remain=wait-(now-lastCalled);return args=arguments,thisArg=this,remain<=0?(lastCalled=now,result=func.apply(thisArg,args)):timeoutId||(timeoutId=setTimeout(trailingCall,remain)),result}}function wrap(func,wrapper){return function(){var args=[func];return arguments.length&&push.apply(args,arguments),wrapper.apply(this,args)}}function clone(value){return value&&objectTypes[typeof value]?isArray(value)?value.slice():extend({},value):value}function has(object,property){return hasOwnProperty.call(object,property)}function isBoolean(value){return value===!0||value===!1||toString.call(value)==boolClass}function isDate(value){return toString.call(value)==dateClass}function isElement(value){return!!value&&value.nodeType==1}function isEqual(a,b,stack){stack||(stack=[]);if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&toString.call(a.isEqual)==funcClass)return a.isEqual(b);if(b.isEqual&&toString.call(b.isEqual)==funcClass)return b.isEqual(a);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case stringClass:return a==String(b);case numberClass:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case boolClass:case dateClass:return+a==+b;case regexpClass:return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var length=stack.length;while(length--)if(stack[length]==a)return!0;var index=-1,result=!0,size=0;stack.push(a);if(className==arrayClass){size=a.length,result=size==b.length;if(result)while(size--)if(!(result=isEqual(a[size],b[size],stack)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var prop in a)if(hasOwnProperty.call(a,prop)){size++;if(!(result=hasOwnProperty.call(b,prop)&&isEqual(a[prop],b[prop],stack)))break}if(result){for(prop in b)if(hasOwnProperty.call(b,prop)&&!(size--))break;result=!size}if(result&&hasDontEnumBug)while(++index<7){prop=shadowed[index];if(hasOwnProperty.call(a,prop)&&!(result=hasOwnProperty.call(b,prop)&&isEqual(a[prop],b[prop],stack)))break}}return stack.pop(),result}function isFinite(value){return nativeIsFinite(value)&&toString.call(value)==numberClass}function isFunction(value){return toString.call(value)==funcClass}function isObject(value){return value&&objectTypes[typeof value]}function isNaN(value){return toString.call(value)==numberClass&&value!=+value}function isNull(value){return value===null}function isNumber(value){return toString.call(value)==numberClass}function isRegExp(value){return toString.call(value)==regexpClass}function isString(value){return toString.call(value)==stringClass}function isUndefined(value){return value===undefined}function pick(object){var prop,index=0,props=concat.apply(ArrayProto,arguments),length=props.length,result={};while(++index<length)prop=props[index],prop in object&&(result[prop]=object[prop]);return result}function size(value){if(!value)return 0;var length=value.length;return length===length>>>0?value.length:keys(value).length}function escape(string){return string==null?"":(string+"").replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object){forEach(functions(object),function(methodName){var func=lodash[methodName]=object[methodName];LoDash.prototype[methodName]=function(){var args=[this._wrapped];arguments.length&&push.apply(args,arguments);var result=func.apply(lodash,args);return this._chain&&(result=new LoDash(result),result._chain=!0),result}})}function noConflict(){return window._=oldDash,this}function result(object,property){if(!object)return null;var value=object[property];return toString.call(value)==funcClass?object[property]():value}function template(text,data,options){options||(options={});var isEvaluating,result,escapeDelimiter=options.escape,evaluateDelimiter=options.evaluate,interpolateDelimiter=options.interpolate,settings=lodash.templateSettings,variable=options.variable;escapeDelimiter==null&&(escapeDelimiter=settings.escape),evaluateDelimiter==null&&(evaluateDelimiter=settings.evaluate),interpolateDelimiter==null&&(interpolateDelimiter=settings.interpolate),escapeDelimiter&&(text=text.replace(escapeDelimiter,tokenizeEscape)),interpolateDelimiter&&(text=text.replace(interpolateDelimiter,tokenizeInterpolate)),evaluateDelimiter!=lastEvaluateDelimiter&&(lastEvaluateDelimiter=evaluateDelimiter,reEvaluateDelimiter=RegExp((evaluateDelimiter?evaluateDelimiter.source:"($^)")+"|<e%-([\\s\\S]+?)%>|<e%=([\\s\\S]+?)%>","g")),isEvaluating=tokenized.length,text=text.replace(reEvaluateDelimiter,tokenizeEvaluate),isEvaluating=isEvaluating!=tokenized.length,text="__p += '"+text.replace(reUnescapedString,escapeStringChar).replace(reToken,detokenize)+"';\n",tokenized.length=0,variable||(variable=settings.variable||lastVariable||"obj",isEvaluating?text="with ("+variable+") {\n"+text+"\n}\n":(variable!=lastVariable&&(lastVariable=variable,reDoubleVariable=RegExp("(\\(\\s*)"+variable+"\\."+variable+"\\b","g")),text=text.replace(reInsertVariable,"$&"+variable+".").replace(reDoubleVariable,"$1__d"))),text=(isEvaluating?text.replace(reEmptyStringLeading,""):text).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),text="function("+variable+") {\n"+variable+" || ("+variable+" = {});\n"+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":", __d = "+variable+"."+variable+" || "+variable+";\n")+text+"return __p\n}",useSourceURL&&(text+="\n//@ sourceURL=/lodash/template/source["+templateCounter++ +"]");try{result=Function("_","return "+text)(lodash)}catch(e){result=function(){throw e}}return data?result(data):(result.source=text,result)}function times(n,callback,thisArg){var index=-1;if(thisArg)while(++index<n)callback.call(thisArg,index);else while(++index<n)callback(index)}function uniqueId(prefix){var id=idCounter++;return prefix?prefix+id:id}function chain(value){return value=new LoDash(value),value._chain=!0,value}function tap(value,interceptor){return interceptor(value),value}function wrapperChain(){return this._chain=!0,this}function wrapperValue(){return this._wrapped}var lastEvaluateDelimiter,lastVariable,reDoubleVariable,reEvaluateDelimiter,freeExports=typeof exports=="object"&&exports&&(typeof global=="object"&&global&&global==global.global&&(window=global),exports),ArrayProto=Array.prototype,ObjectProto=Object.prototype,idCounter=0,oldDash=window._,reComplexDelimiter=/[-+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reInsertVariable=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,reNative=RegExp("^"+(ObjectProto.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),reToken=/__token__(\d+)/g,reUnescapedHtml=/[&<"']/g,reUnescapedString=/['\n\r\t\u2028\u2029\\]/g,shadowed=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],templateCounter=0,token="__token__",tokenized=[],concat=ArrayProto.concat,hasOwnProperty=ObjectProto.hasOwnProperty,push=ArrayProto.push,propertyIsEnumerable=ObjectProto.propertyIsEnumerable,slice=ArrayProto.slice,toString=ObjectProto.toString,nativeBind=reNative.test(nativeBind=slice.bind)&&nativeBind,nativeIsArray=reNative.test(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=window.isFinite,nativeKeys=reNative.test(nativeKeys=Object.keys)&&nativeKeys,arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",regexpClass="[object RegExp]",stringClass="[object String]",clearTimeout=window.clearTimeout,setTimeout=window.setTimeout,hasDontEnumBug=!propertyIsEnumerable.call({valueOf:0},"valueOf"),noArraySliceOnStrings=slice.call("x")[0]!="x",noCharByIndex="x"[0]+Object("x")[0]!="xx",isBindFast=nativeBind&&/\n|Opera/.test(nativeBind+toString.call(window.opera)),isKeysFast=nativeKeys&&/^.+$|true/.test(nativeKeys+!!window.attachEvent);try{var useSourceURL=(Function("//@")(),!0)}catch(e){}var htmlEscapes={"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#x27;"},objectTypes={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:"obj"};var iteratorTemplate=template("<% if (useStrict) { %>'use strict';\n<% } %>var index, iteratee = <%= firstArg %>, result<% if (init) { %> = <%= init %><% } %>;\n<%= exit %>;\n<%= top %>;\n<% if (arrayBranch) { %>var length = iteratee.length; index = -1;  <% if (objectBranch) { %>\nif (length === length >>> 0) {<% } %>  <% if (noCharByIndex) { %>\n  if (toString.call(iteratee) == stringClass) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  <%= arrayBranch.beforeLoop %>;\n  while (++index < length) {\n    <%= arrayBranch.inLoop %>\n  }  <% if (objectBranch) { %>\n}<% } %><% } %><% if (objectBranch) { %>  <% if (arrayBranch) { %>\nelse {<% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var props = nativeKeys(iteratee),\n      propIndex = -1,\n      length = props.length;\n\n  <%= objectBranch.beforeLoop %>;\n  while (++propIndex < length) {\n    index = props[propIndex];\n    if (!(skipProto && index == 'prototype')) {\n      <%= objectBranch.inLoop %>\n    }\n  }  <% } else { %>\n  <%= objectBranch.beforeLoop %>;\n  for (index in iteratee) {    <% if (hasDontEnumBug) { %>\n    <%   if (useHas) { %>if (hasOwnProperty.call(iteratee, index)) {\n  <% } %>    <%= objectBranch.inLoop %>;\n    <%   if (useHas) { %>}<% } %>    <% } else { %>\n    if (!(skipProto && index == 'prototype')<% if (useHas) { %> &&\n        hasOwnProperty.call(iteratee, index)<% } %>) {\n      <%= objectBranch.inLoop %>\n    }    <% } %>\n  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    <%= objectBranch.inLoop %>\n  }    <% } %>  <% } %>  <% if (arrayBranch) { %>\n}<% } %><% } %>\n<%= bottom %>;\nreturn result"),baseIteratorOptions={args:"collection, callback, thisArg",init:"collection",top:"if (!callback) {\n  callback = identity\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"callback(iteratee[index], index, collection)"},everyIteratorOptions={init:"true",inLoop:"if (!callback(iteratee[index], index, collection)) return !result"},extendIteratorOptions={useHas:!1,useStrict:!1,args:"object",init:"object",top:"for (var iterateeIndex = 1, length = arguments.length; iterateeIndex < length; iterateeIndex++) {\n  iteratee = arguments[iterateeIndex];\n"+(hasDontEnumBug?"  if (iteratee) {":""),inLoop:"result[index] = iteratee[index]",bottom:(hasDontEnumBug?"  }\n":"")+"}"},filterIteratorOptions={init:"[]",inLoop:"callback(iteratee[index], index, collection) && result.push(iteratee[index])"},forEachIteratorOptions={top:"if (thisArg) callback = iteratorBind(callback, thisArg)"},forOwnIteratorOptions={inLoop:{object:baseIteratorOptions.inLoop}},mapIteratorOptions={init:"",exit:"if (!collection) return []",beforeLoop:{array:"result = Array(length)",object:"result = "+(isKeysFast?"Array(length)":"[]")},inLoop:{array:"result[index] = callback(iteratee[index], index, collection)",object:"result"+(isKeysFast?"[propIndex] = ":".push")+"(callback(iteratee[index], index, collection))"}},shimKeys=createIterator({args:"object",exit:"if (!(object && objectTypes[typeof object])) throw TypeError()",init:"[]",inLoop:"result.push(index)"}),contains=createIterator({args:"collection, target",init:"false",noCharByIndex:!1,beforeLoop:{array:"if (toString.call(iteratee) == stringClass) return collection.indexOf(target) > -1"},inLoop:"if (iteratee[index] === target) return true"}),every=createIterator(baseIteratorOptions,everyIteratorOptions),filter=createIterator(baseIteratorOptions,filterIteratorOptions),find=createIterator(baseIteratorOptions,forEachIteratorOptions,{init:"",inLoop:"if (callback(iteratee[index], index, collection)) return iteratee[index]"}),forEach=createIterator(baseIteratorOptions,forEachIteratorOptions),groupBy=createIterator(baseIteratorOptions,{init:"{}",top:"var prop, isFunc = typeof callback == 'function';\nif (isFunc && thisArg) callback = iteratorBind(callback, thisArg)",inLoop:"prop = isFunc\n  ? callback(iteratee[index], index, collection)\n  : iteratee[index][callback];\n(hasOwnProperty.call(result, prop) ? result[prop] : result[prop] = []).push(iteratee[index])"}),invoke=createIterator(mapIteratorOptions,{args:"collection, methodName",top:"var args = slice.call(arguments, 2),\n    isFunc = typeof methodName == 'function'",inLoop:{array:"result[index] = (isFunc ? methodName : iteratee[index][methodName]).apply(iteratee[index], args)",object:"result"+(isKeysFast?"[propIndex] = ":".push")+"((isFunc ? methodName : iteratee[index][methodName]).apply(iteratee[index], args))"}}),map=createIterator(baseIteratorOptions,mapIteratorOptions),pluck=createIterator(mapIteratorOptions,{args:"collection, property",inLoop:{array:"result[index] = iteratee[index][property]",object:"result"+(isKeysFast?"[propIndex] = ":".push")+"(iteratee[index][property])"}}),reduce=createIterator({args:"collection, callback, accumulator, thisArg",init:"accumulator",top:"var noaccum = arguments.length < 3;\nif (thisArg) callback = iteratorBind(callback, thisArg)",beforeLoop:{array:"if (noaccum) result = collection[++index]"},inLoop:{array:"result = callback(result, iteratee[index], index, collection)",object:"result = noaccum\n  ? (noaccum = false, iteratee[index])\n  : callback(result, iteratee[index], index, collection)"}}),reject=createIterator(baseIteratorOptions,filterIteratorOptions,{inLoop:"!"+filterIteratorOptions.inLoop}),some=createIterator(baseIteratorOptions,everyIteratorOptions,{init:"false",inLoop:everyIteratorOptions.inLoop.replace("!","")}),sortBy=createIterator(baseIteratorOptions,mapIteratorOptions,{top:"if (typeof callback == 'string') {\n  var prop = callback;\n  callback = function(collection) { return collection[prop] }\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:{array:"result[index] = {\n  criteria: callback(iteratee[index], index, collection),\n  value: iteratee[index]\n}",object:"result"+(isKeysFast?"[propIndex] = ":".push")+"({\n"+"  criteria: callback(iteratee[index], index, collection),\n"+"  value: iteratee[index]\n"+"})"},bottom:"result.sort(compareAscending);\nlength = result.length;\nwhile (length--) {\n  result[length] = result[length].value\n}"}),bindAll=createIterator({useHas:!1,useStrict:!1,args:"object",init:"object",top:"var funcs = arguments,\n    length = funcs.length;\nif (length > 1) {\n  for (var index = 1; index < length; index++)\n    result[funcs[index]] = bind(result[funcs[index]], result);\n  return result\n}",inLoop:"if (toString.call(result[index]) == funcClass) result[index] = bind(result[index], result)"}),defaults=createIterator(extendIteratorOptions,{inLoop:"if (result[index] == null) "+extendIteratorOptions.inLoop}),extend=createIterator(extendIteratorOptions),forIn=createIterator(baseIteratorOptions,forEachIteratorOptions,forOwnIteratorOptions,{useHas:!1}),forOwn=createIterator(baseIteratorOptions,forEachIteratorOptions,forOwnIteratorOptions),functions=createIterator({useHas:!1,args:"object",init:"[]",inLoop:"if (toString.call(iteratee[index]) == funcClass) result.push(index)",bottom:"result.sort()"}),isArguments=function(value){return toString.call(value)=="[object Arguments]"};isArguments(arguments)||(isArguments=function(value){return!!value&&!!hasOwnProperty.call(value,"callee")});var isArray=nativeIsArray||function(value){return toString.call(value)==arrayClass},isEmpty=createIterator({args:"value",init:"true",top:"var className = toString.call(value);\nif (className == arrayClass || className == stringClass) return !value.length",inLoop:{object:"return false"}}),keys=nativeKeys?function(object){return typeof object=="function"&&propertyIsEnumerable.call(object,"prototype")?shimKeys(object):nativeKeys(object)}:shimKeys,values=createIterator({args:"object",init:"[]",inLoop:"result.push(iteratee[index])"});lodash.VERSION="0.4.2",lodash.after=after,lodash.bind=bind,lodash.bindAll=bindAll,lodash.chain=chain,lodash.clone=clone,lodash.compact=compact,lodash.compose=compose,lodash.contains=contains,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.escape=escape,lodash.every=every,lodash.extend=extend,lodash.filter=filter,lodash.find=find,lodash.first=first,lodash.flatten=flatten,lodash.forEach=forEach,lodash.forIn=forIn,lodash.forOwn=forOwn,lodash.functions=functions,lodash.groupBy=groupBy,lodash.has=has,lodash.identity=identity,lodash.indexOf=indexOf,lodash.initial=initial,lodash.intersection=intersection,lodash.invoke=invoke,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isNaN=isNaN,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isUndefined=isUndefined,lodash.keys=keys,lodash.last=last,lodash.lastIndexOf=lastIndexOf,lodash.map=map,lodash.max=max,lodash.memoize=memoize,lodash.min=min,lodash.mixin=mixin,lodash.noConflict=noConflict,lodash.once=once,lodash.partial=partial,lodash.pick=pick,lodash.pluck=pluck,lodash.range=range,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.reject=reject,lodash.rest=rest,lodash.result=result,lodash.shuffle=shuffle,lodash.size=size,lodash.some=some,lodash.sortBy=sortBy,lodash.sortedIndex=sortedIndex,lodash.tap=tap,lodash.template=template,lodash.throttle=throttle,lodash.times=times,lodash.toArray=toArray,lodash.union=union,lodash.uniq=uniq,lodash.uniqueId=uniqueId,lodash.values=values,lodash.without=without,lodash.wrap=wrap,lodash.zip=zip,lodash.zipObject=zipObject,lodash.all=every,lodash.any=some,lodash.collect=map,lodash.detect=find,lodash.each=forEach,lodash.foldl=reduce,lodash.foldr=reduceRight,lodash.head=first,lodash.include=contains,lodash.inject=reduce,lodash.methods=functions,lodash.select=filter,lodash.tail=rest,lodash.take=first,lodash.unique=uniq,lodash._iteratorTemplate=iteratorTemplate,lodash._shimKeys=shimKeys,LoDash.prototype=lodash.prototype,mixin(lodash),LoDash.prototype.chain=wrapperChain,LoDash.prototype.value=wrapperValue,forEach(["pop","push","reverse","shift","sort","splice","unshift"],function(methodName){var func=ArrayProto[methodName];LoDash.prototype[methodName]=function(){var value=this._wrapped;return func.apply(value,arguments),value.length===0&&delete value[0],this._chain&&(value=new LoDash(value),value._chain=!0),value}}),forEach(["concat","join","slice"],function(methodName){var func=ArrayProto[methodName];LoDash.prototype[methodName]=function(){var value=this._wrapped,result=func.apply(value,arguments);return this._chain&&(result=new LoDash(result),result._chain=!0),result}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(window._=lodash,define("underscore",[],function(){return lodash})):freeExports?typeof module=="object"&&module&&module.exports==freeExports?(module.exports=lodash)._=lodash:freeExports._=lodash:window._=lodash})(this),function(root,factory){typeof exports!="undefined"?factory(root,exports,require("underscore")):typeof define=="function"&&define.amd?define("backbone",["underscore","jquery","exports"],function(_,$,exports){root.Backbone=factory(root,exports,_,$)}):root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender)}(this,function(root,Backbone,_,$){var previousBackbone=root.Backbone,slice=Array.prototype.slice,splice=Array.prototype.splice;Backbone.VERSION="0.9.2",Backbone.setDomLibrary=function(lib){$=lib},Backbone.noConflict=function(){return root.Backbone=previousBackbone,Backbone},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var eventSplitter=/\s+/,Events=Backbone.Events={on:function(events,callback,context){var calls,event,node,tail,list;if(!callback)return this;events=events.split(eventSplitter),calls=this._callbacks||(this._callbacks={});while(event=events.shift())list=calls[event],node=list?list.tail:{},node.next=tail={},node.context=context,node.callback=callback,calls[event]={tail:tail,next:list?list.next:node};return this},off:function(events,callback,context){var event,calls,node,tail,cb,ctx;if(!(calls=this._callbacks))return;if(!(events||callback||context))return delete this._callbacks,this;events=events?events.split(eventSplitter):_.keys(calls);while(event=events.shift()){node=calls[event],delete calls[event];if(!node||!callback&&!context)continue;tail=node.tail;while((node=node.next)!==tail)cb=node.callback,ctx=node.context,(callback&&cb!==callback||context&&ctx!==context)&&this.on(event,cb,ctx)}return this},trigger:function(events){var event,node,calls,tail,args,all,rest;if(!(calls=this._callbacks))return this;all=calls.all,events=events.split(eventSplitter),rest=slice.call(arguments,1);while(event=events.shift()){if(node=calls[event]){tail=node.tail;while((node=node.next)!==tail)node.callback.apply(node.context||this,rest)}if(node=all){tail=node.tail,args=[event].concat(rest);while((node=node.next)!==tail)node.callback.apply(node.context||this,args)}}return this}};Events.bind=Events.on,Events.unbind=Events.off;var Model=Backbone.Model=function(attributes,options){var defaults;attributes||(attributes={}),options&&options.parse&&(attributes=this.parse(attributes));if(defaults=getValue(this,"defaults"))attributes=_.extend({},defaults,attributes);options&&options.collection&&(this.collection=options.collection),this.attributes={},this._escapedAttributes={},this.cid=_.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(attributes,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=_.clone(this.attributes),this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},get:function(attr){return this.attributes[attr]},escape:function(attr){var html;if(html=this._escapedAttributes[attr])return html;var val=this.get(attr);return this._escapedAttributes[attr]=_.escape(val==null?"":""+val)},has:function(attr){return this.get(attr)!=null},set:function(key,value,options){var attrs,attr,val;_.isObject(key)||key==null?(attrs=key,options=value):(attrs={},attrs[key]=value),options||(options={});if(!attrs)return this;attrs instanceof Model&&(attrs=attrs.attributes);if(options.unset)for(attr in attrs)attrs[attr]=void 0;if(!this._validate(attrs,options))return!1;this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]);var changes=options.changes={},now=this.attributes,escaped=this._escapedAttributes,prev=this._previousAttributes||{};for(attr in attrs){val=attrs[attr];if(!_.isEqual(now[attr],val)||options.unset&&_.has(now,attr))delete escaped[attr],(options.silent?this._silent:changes)[attr]=!0;options.unset?delete now[attr]:now[attr]=val,!_.isEqual(prev[attr],val)||_.has(now,attr)!=_.has(prev,attr)?(this.changed[attr]=val,options.silent||(this._pending[attr]=!0)):(delete this.changed[attr],delete this._pending[attr])}return options.silent||this.change(options),this},unset:function(attr,options){return(options||(options={})).unset=!0,this.set(attr,null,options)},clear:function(options){return(options||(options={})).unset=!0,this.set(_.clone(this.attributes),options)},fetch:function(options){options=options?_.clone(options):{};var model=this,success=options.success;return options.success=function(resp,status,xhr){if(!model.set(model.parse(resp,xhr),options))return!1;success&&success(model,resp)},options.error=Backbone.wrapError(options.error,model,options),(this.sync||Backbone.sync).call(this,"read",this,options)},save:function(key,value,options){var attrs,current;_.isObject(key)||key==null?(attrs=key,options=value):(attrs={},attrs[key]=value),options=options?_.clone(options):{};if(options.wait){if(!this._validate(attrs,options))return!1;current=_.clone(this.attributes)}var silentOptions=_.extend({},options,{silent:!0});if(attrs&&!this.set(attrs,options.wait?silentOptions:options))return!1;var model=this,success=options.success;options.success=function(resp,status,xhr){var serverAttrs=model.parse(resp,xhr);options.wait&&(delete options.wait,serverAttrs=_.extend(attrs||{},serverAttrs));if(!model.set(serverAttrs,options))return!1;success?success(model,resp):model.trigger("sync",model,resp,options)},options.error=Backbone.wrapError(options.error,model,options);var method=this.isNew()?"create":"update",xhr=(this.sync||Backbone.sync).call(this,method,this,options);return options.wait&&this.set(current,silentOptions),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,triggerDestroy=function(){model.trigger("destroy",model,model.collection,options)};if(this.isNew())return triggerDestroy(),!1;options.success=function(resp){options.wait&&triggerDestroy(),success?success(model,resp):model.trigger("sync",model,resp,options)},options.error=Backbone.wrapError(options.error,model,options);var xhr=(this.sync||Backbone.sync).call(this,"delete",this,options);return options.wait||triggerDestroy(),xhr},url:function(){var base=getValue(this,"urlRoot")||getValue(this.collection,"url")||urlError();return this.isNew()?base:base+(base.charAt(base.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(resp,xhr){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(options){options||(options={});var changing=this._changing;this._changing=!0;for(var attr in this._silent)this._pending[attr]=!0;var changes=_.extend({},options.changes,this._silent);this._silent={};for(var attr in changes)this.trigger("change:"+attr,this,this.get(attr),options);if(changing)return this;while(!_.isEmpty(this._pending)){this._pending={},this.trigger("change",this,options);for(var attr in this.changed){if(this._pending[attr]||this._silent[attr])continue;delete this.changed[attr]}this._previousAttributes=_.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(attr){return arguments.length?_.has(this.changed,attr):!_.isEmpty(this.changed)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._previousAttributes;for(var attr in diff){if(_.isEqual(old[attr],val=diff[attr]))continue;(changed||(changed={}))[attr]=val}return changed},previous:function(attr){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(attrs,options){if(options.silent||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validate(attrs,options);return error?(options&&options.error?options.error(this,error,options):this.trigger("error",this,error,options),!1):!0}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.model&&(this.model=options.model),options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,{silent:!0,parse:options.parse})};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},add:function(models,options){var i,index,length,model,cid,id,cids={},ids={},dups=[];options||(options={}),models=_.isArray(models)?models.slice():[models];for(i=0,length=models.length;i<length;i++){if(!(model=models[i]=this._prepareModel(models[i],options)))throw new Error("Can't add an invalid model to a collection");cid=model.cid,id=model.id;if(cids[cid]||this._byCid[cid]||id!=null&&(ids[id]||this._byId[id])){dups.push(i);continue}cids[cid]=ids[id]=model}i=dups.length;while(i--)models.splice(dups[i],1);for(i=0,length=models.length;i<length;i++)(model=models[i]).on("all",this._onModelEvent,this),this._byCid[model.cid]=model,model.id!=null&&(this._byId[model.id]=model);this.length+=length,index=options.at!=null?options.at:this.models.length,splice.apply(this.models,[index,0].concat(models)),this.comparator&&this.sort({silent:!0});if(options.silent)return this;for(i=0,length=this.models.length;i<length;i++){if(!cids[(model=this.models[i]).cid])continue;options.index=i,model.trigger("add",model,this,options)}return this},remove:function(models,options){var i,l,index,model;options||(options={}),models=_.isArray(models)?models.slice():[models];for(i=0,l=models.length;i<l;i++){model=this.getByCid(models[i])||this.get(models[i]);if(!model)continue;delete this._byId[model.id],delete this._byCid[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model)}return this},push:function(model,options){return model=this._prepareModel(model,options),this.add(model,options),model},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return model=this._prepareModel(model,options),this.add(model,_.extend({at:0},options)),model},shift:function(options){var model=this.at(0);return this.remove(model,options),model},get:function(id){return id==null?void 0:this._byId[id.id!=null?id.id:id]},getByCid:function(cid){return cid&&this._byCid[cid.cid||cid]},at:function(index){return this.models[index]},where:function(attrs){return _.isEmpty(attrs)?[]:this.filter(function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},sort:function(options){options||(options={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var boundComparator=_.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(boundComparator):this.models.sort(boundComparator),options.silent||this.trigger("reset",this,options),this},pluck:function(attr){return _.map(this.models,function(model){return model.get(attr)})},reset:function(models,options){models||(models=[]),options||(options={});for(var i=0,l=this.models.length;i<l;i++)this._removeReference(this.models[i]);return this._reset(),this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),this},fetch:function(options){options=options?_.clone(options):{},options.parse===undefined&&(options.parse=!0);var collection=this,success=options.success;return options.success=function(resp,status,xhr){collection[options.add?"add":"reset"](collection.parse(resp,xhr),options),success&&success(collection,resp)},options.error=Backbone.wrapError(options.error,collection,options),(this.sync||Backbone.sync).call(this,"read",this,options)},create:function(model,options){var coll=this;options=options?_.clone(options):{},model=this._prepareModel(model,options);if(!model)return!1;options.wait||coll.add(model,options);var success=options.success;return options.success=function(nextModel,resp,xhr){options.wait&&coll.add(nextModel,options),success?success(nextModel,resp):nextModel.trigger("sync",model,resp,options)},model.save(null,options),model},parse:function(resp,xhr){return resp},chain:function(){return _(this.models).chain()},_reset:function(options){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(model,options){options||(options={});if(model instanceof Model)model.collection||(model.collection=this);else{var attrs=model;options.collection=this,model=new this.model(attrs,options),model._validate(model.attributes,options)||(model=!1)}return model},_removeReference:function(model){this==model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){if((event=="add"||event=="remove")&&collection!=this)return;event=="destroy"&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],this._byId[model.id]=model),this.trigger.apply(this,arguments)}});var methods=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];_.each(methods,function(method){Collection.prototype[method]=function(){return _[method].apply(_,[this.models].concat(_.toArray(arguments)))}});var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},namedParam=/:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[-[\]{}()+?.,\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){return Backbone.history||(Backbone.history=new History),_.isRegExp(route)||(route=this._routeToRegExp(route)),callback||(callback=this[name]),Backbone.history.route(route,_.bind(function(fragment){var args=this._extractParameters(route,fragment);callback&&callback.apply(this,args),this.trigger.apply(this,["route:"+name].concat(args)),Backbone.history.trigger("route",this,name,args)},this)),this},navigate:function(fragment,options){Backbone.history.navigate(fragment,options)},_bindRoutes:function(){if(!this.routes)return;var routes=[];for(var route in this.routes)routes.unshift([route,this.routes[route]]);for(var i=0,l=routes.length;i<l;i++)this.route(routes[i][0],routes[i][1],this[routes[i][1]])},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(namedParam,"([^/]+)").replace(splatParam,"(.*?)"),new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){return route.exec(fragment).slice(1)}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl")},routeStripper=/^[#\/]/,isExplorer=/msie [\w.]+/;History.started=!1,_.extend(History.prototype,Events,{interval:50,getHash:function(windowOverride){var loc=windowOverride?windowOverride.location:window.location,match=loc.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(fragment==null)if(this._hasPushState||forcePushState){fragment=window.location.pathname;var search=window.location.search;search&&(fragment+=search)}else fragment=this.getHash();return fragment.indexOf(this.options.root)||(fragment=fragment.substr(this.options.root.length)),fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({},{root:"/"},this.options,options),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||docMode<=7);oldIE&&(this.iframe=$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(fragment)),this._hasPushState?$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=window.location,atRoot=loc.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!atRoot)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),window.history.replaceState({},document.title,loc.protocol+"//"+loc.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();current==this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe)));if(current==this.fragment)return!1;this.iframe&&this.navigate(current),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride),matched=_.any(this.handlers,function(handler){if(handler.route.test(fragment))return handler.callback(fragment),!0});return matched},navigate:function(fragment,options){if(!History.started)return!1;if(!options||options===!0)options={trigger:options};var frag=(fragment||"").replace(routeStripper,"");if(this.fragment==frag)return;this._hasPushState?(frag.indexOf(this.options.root)!=0&&(frag=this.options.root+frag),this.fragment=frag,window.history[options.replace?"replaceState":"pushState"]({},document.title,frag)):this._wantsHashChange?(this.fragment=frag,this._updateHash(window.location,frag,options.replace),this.iframe&&frag!=this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,frag,options.replace))):window.location.assign(this.options.root+fragment),options.trigger&&this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){replace?location.replace(location.toString().replace(/(javascript:|#).*$/,"")+"#"+fragment):location.hash=fragment}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),this._configure(options||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(tagName,attributes,content){var el=document.createElement(tagName);return attributes&&$(el).attr(attributes),content!=null&&$(el).html(content),el},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof $?element:$(element),this.el=this.$el[0],delegate!==!1&&this.delegateEvents(),this},delegateEvents:function(events){if(!events&&!(events=getValue(this,"events")))return;this.undelegateEvents();for(var key in events){var method=events[key];_.isFunction(method)||(method=this[events[key]]);if(!method)throw new Error('Method "'+events[key]+'" does not exist');var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,selector===""?this.$el.bind(eventName,method):this.$el.delegate(selector,eventName,method)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(options){this.options&&(options=_.extend({},this.options,options));for(var i=0,l=viewOptions.length;i<l;i++){var attr=viewOptions[i];options[attr]&&(this[attr]=options[attr])}this.options=options},_ensureElement:function(){if(!this.el){var attrs=getValue(this,"attributes")||{};this.id&&(attrs.id=this.id),this.className&&(attrs["class"]=this.className),this.setElement(this.make(this.tagName,attrs),!1)}else this.setElement(this.el,!1)}});var extend=function(protoProps,classProps){var child=inherits(this,protoProps,classProps);return child.extend=this.extend,child};Model.extend=Collection.extend=Router.extend=View.extend=extend;var methodMap={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};Backbone.sync=function(method,model,options){var type=methodMap[method];options||(options={});var params={type:type,dataType:"json"};return options.url||(params.url=getValue(model,"url")||urlError()),!options.data&&model&&(method=="create"||method=="update")&&(params.contentType="application/json",params.data=JSON.stringify(model.toJSON())),Backbone.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),Backbone.emulateHTTP&&(type==="PUT"||type==="DELETE")&&(Backbone.emulateJSON&&(params.data._method=type),params.type="POST",params.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type)}),params.type!=="GET"&&!Backbone.emulateJSON&&(params.processData=!1),$.ajax(_.extend(params,options))},Backbone.wrapError=function(onError,originalModel,options){return function(model,resp){resp=model===originalModel?resp:model,onError?onError(originalModel,resp,options):originalModel.trigger("error",originalModel,resp,options)}};var ctor=function(){},inherits=function(parent,protoProps,staticProps){var child;return protoProps&&protoProps.hasOwnProperty("constructor")?child=protoProps.constructor:child=function(){parent.apply(this,arguments)},_.extend(child,parent),ctor.prototype=parent.prototype,child.prototype=new ctor,protoProps&&_.extend(child.prototype,protoProps),staticProps&&_.extend(child,staticProps),child.prototype.constructor=child,child.__super__=parent.prototype,child},getValue=function(object,prop){return!object||!object[prop]?null:_.isFunction(object[prop])?object[prop]():object[prop]},urlError=function(){throw new Error('A "url" property or function must be specified')};return Backbone}),function(root,factory){if(typeof exports=="object"){var jquery=require("jquery"),underscore=require("underscore"),backbone=require("backbone");module.exports=factory(jquery,underscore,backbone)}else typeof define=="function"&&define.amd&&define("marionette",["jquery","underscore","backbone"],factory)}(this,function($,_,Backbone){return Backbone.Marionette=function(Backbone,_,$){var Marionette={};Marionette.EventBinder=function(){this._eventBindings=[]},_.extend(Marionette.EventBinder.prototype,{bindTo:function(obj,eventName,callback,context){context=context||this,obj.on(eventName,callback,context);var binding={obj:obj,eventName:eventName,callback:callback,context:context};return this._eventBindings.push(binding),binding},unbindFrom:function(binding){binding.obj.off(binding.eventName,binding.callback,binding.context),this._eventBindings=_.reject(this._eventBindings,function(bind){return bind===binding})},unbindAll:function(){var that=this,bindings=_.map(this._eventBindings,_.identity);_.each(bindings,function(binding,index){that.unbindFrom(binding)})}}),Marionette.EventBinder.extend=Backbone.View.extend,Marionette.View=Backbone.View.extend({constructor:function(){var eventBinder=new Marionette.EventBinder;_.extend(this,eventBinder),Backbone.View.prototype.constructor.apply(this,arguments),this.bindTo(this,"show",this.onShowCalled,this)},getTemplate:function(){var template;return this.options&&this.options.template?template=this.options.template:template=this.template,template},serializeData:function(){var data;return this.model?data=this.model.toJSON():this.collection&&(data={items:this.collection.toJSON()}),data=this.mixinTemplateHelpers(data),data},mixinTemplateHelpers:function(target){target=target||{};var templateHelpers=this.templateHelpers;return _.isFunction(templateHelpers)&&(templateHelpers=templateHelpers.call(this)),_.extend(target,templateHelpers)},configureTriggers:function(){if(!this.triggers)return;var triggers=this.triggers,that=this,triggerEvents={};return _.isFunction(triggers)&&(triggers=triggers.call(this)),_.each(triggers,function(value,key){triggerEvents[key]=function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),that.trigger(value)}}),triggerEvents},delegateEvents:function(events){events=events||this.events,_.isFunction(events)&&(events=events.call(this));var combinedEvents={},triggers=this.configureTriggers();_.extend(combinedEvents,events,triggers),Backbone.View.prototype.delegateEvents.call(this,combinedEvents)},onShowCalled:function(){},close:function(){this.beforeClose&&this.beforeClose(),this.remove(),this.onClose&&this.onClose(),this.trigger("close"),this.unbindAll(),this.unbind()},bindUIElements:function(){if(!this.ui)return;var that=this;this.uiBindings||(this.uiBindings=this.ui),this.ui={},_.each(_.keys(this.uiBindings),function(key){var selector=that.uiBindings[key];that.ui[key]=that.$(selector)})}}),Marionette.ItemView=Marionette.View.extend({constructor:function(){Marionette.View.prototype.constructor.apply(this,arguments),this.initialEvents()},initialEvents:function(){this.collection&&this.bindTo(this.collection,"reset",this.render,this)},render:function(){this.beforeRender&&this.beforeRender(),this.trigger("before:render",this),this.trigger("item:before:render",this);var data=this.serializeData(),template=this.getTemplate(),html=Marionette.Renderer.render(template,data);return this.$el.html(html),this.bindUIElements(),this.onRender&&this.onRender(),this.trigger("render",this),this.trigger("item:rendered",this),this},close:function(){this.trigger("item:before:close"),Marionette.View.prototype.close.apply(this,arguments),this.trigger("item:closed")}}),Marionette.CollectionView=Marionette.View.extend({constructor:function(){Marionette.View.prototype.constructor.apply(this,arguments),this.initChildViewStorage(),this.initialEvents(),this.onShowCallbacks=new Marionette.Callbacks},initialEvents:function(){this.collection&&(this.bindTo(this.collection,"add",this.addChildView,this),this.bindTo(this.collection,"remove",this.removeItemView,this),this.bindTo(this.collection,"reset",this.render,this))},addChildView:function(item,collection,options){this.closeEmptyView();var ItemView=this.getItemView();return this.addItemView(item,ItemView,options.index)},onShowCalled:function(){this.onShowCallbacks.run()},triggerBeforeRender:function(){this.beforeRender&&this.beforeRender(),this.trigger("before:render",this),this.trigger("collection:before:render",this)},triggerRendered:function(){this.onRender&&this.onRender(),this.trigger("render",this),this.trigger("collection:rendered",this)},render:function(){return this.triggerBeforeRender(),this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView(),this.triggerRendered(),this},showCollection:function(){var that=this,ItemView=this.getItemView();this.collection.each(function(item,index){that.addItemView(item,ItemView,index)})},showEmptyView:function(){var EmptyView=this.options.emptyView||this.emptyView;if(EmptyView&&!this._showingEmptyView){this._showingEmptyView=!0;var model=new Backbone.Model;this.addItemView(model,EmptyView,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var itemView=this.options.itemView||this.itemView;if(!itemView){var err=new Error("An `itemView` must be specified");throw err.name="NoItemViewError",err}return itemView},addItemView:function(item,ItemView,index){var that=this,view=this.buildItemView(item,ItemView);this.storeChild(view),this.onItemAdded&&this.onItemAdded(view),this.trigger("item:added",view);var renderResult=this.renderItemView(view,index);view.onShow&&this.onShowCallbacks.add(view.onShow,view);var childBinding=this.bindTo(view,"all",function(){var args=slice.call(arguments);args[0]="itemview:"+args[0],args.splice(1,0,view),that.trigger.apply(that,args)});return this.childBindings=this.childBindings||{},this.childBindings[view.cid]=childBinding,renderResult},renderItemView:function(view,index){view.render(),this.appendHtml(this,view,index)},buildItemView:function(item,ItemView){var itemViewOptions=_.result(this,"itemViewOptions"),options=_.extend({model:item},itemViewOptions),view=new ItemView(options);return view},removeItemView:function(item){var view=this.children[item.cid];if(view){var childBinding=this.childBindings[view.cid];childBinding&&(this.unbindFrom(childBinding),delete this.childBindings[view.cid]),view.close(),delete this.children[item.cid]}(!this.collection||this.collection.length===0)&&this.showEmptyView(),this.trigger("item:removed",view)},appendHtml:function(collectionView,itemView,index){collectionView.$el.append(itemView.el)},storeChild:function(view){this.children[view.model.cid]=view},initChildViewStorage:function(){this.children={}},close:function(){this.trigger("collection:before:close"),this.closeChildren(),Marionette.View.prototype.close.apply(this,arguments),this.trigger("collection:closed")},closeChildren:function(){var that=this;this.children&&_.each(_.clone(this.children),function(childView){that.removeItemView(childView.model)})}}),Marionette.CompositeView=Marionette.CollectionView.extend({constructor:function(options){Marionette.CollectionView.apply(this,arguments),this.itemView=this.getItemView()},initialEvents:function(){this.collection&&(this.bindTo(this.collection,"add",this.addChildView,this),this.bindTo(this.collection,"remove",this.removeItemView,this),this.bindTo(this.collection,"reset",this.renderCollection,this))},getItemView:function(){return this.itemView||this.constructor},render:function(){var that=this;this.resetItemViewContainer();var html=this.renderModel();return this.$el.html(html),this.bindUIElements(),this.trigger("composite:model:rendered"),this.trigger("render"),this.renderCollection(),this.trigger("composite:rendered"),this},renderCollection:function(){Marionette.CollectionView.prototype.render.apply(this,arguments),this.trigger("composite:collection:rendered")},renderModel:function(){var data={};data=this.serializeData();var template=this.getTemplate();return Marionette.Renderer.render(template,data)},appendHtml:function(cv,iv){var $container=this.getItemViewContainer(cv);$container.append(iv.el)},getItemViewContainer:function(containerView){var container;if("$itemViewContainer"in containerView)container=containerView.$itemViewContainer;else{if(containerView.itemViewContainer){container=containerView.$(_.result(containerView,"itemViewContainer"));if(container.length<=0){var err=new Error("Missing `itemViewContainer`");throw err.name="ItemViewContainerMissingError",err}}else container=containerView.$el;containerView.$itemViewContainer=container}return container},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),Marionette.Region=function(options){this.options=options||{};var eventBinder=new Marionette.EventBinder;_.extend(this,eventBinder,options);if(!this.el){var err=new Error("An 'el' must be specified");throw err.name="NoElError",err}this.initialize&&this.initialize.apply(this,arguments)},_.extend(Marionette.Region.prototype,Backbone.Events,{show:function(view){this.ensureEl(),this.close(),view.render(),this.open(view),view.onShow&&view.onShow(),view.trigger("show"),this.onShow&&this.onShow(view),this.trigger("view:show",view),this.currentView=view},ensureEl:function(){if(!this.$el||this.$el.length===0)this.$el=this.getEl(this.el)},getEl:function(selector){return $(selector)},open:function(view){this.$el.html(view.el)},close:function(){var view=this.currentView;if(!view)return;view.close&&view.close(),this.trigger("view:closed",view),delete this.currentView},attachView:function(view){this.currentView=view}}),Marionette.Region.extend=Backbone.View.extend,Marionette.Layout=Marionette.ItemView.extend({regionType:Marionette.Region,constructor:function(){Backbone.Marionette.ItemView.apply(this,arguments),this.initializeRegions()},render:function(){var result=Marionette.ItemView.prototype.render.apply(this,arguments);return this.render=function(){this.closeRegions(),this.reInitializeRegions();var result=Marionette.ItemView.prototype.render.apply(this,arguments);return result},result},close:function(){this.closeRegions(),this.destroyRegions(),Backbone.Marionette.ItemView.prototype.close.call(this,arguments)},initializeRegions:function(){this.regionManagers||(this.regionManagers={});var that=this;_.each(this.regions,function(region,name){if(typeof region!="string"&&typeof region.selector!="string")throw new Exception("Region must be specified as a selector string or an object with selector property");selector=typeof region=="string"?region:region.selector;var regionType=typeof region.regionType=="undefined"?that.regionType:region.regionType,regionManager=new regionType({el:selector,getEl:function(selector){return that.$(selector)}});that.regionManagers[name]=regionManager,that[name]=regionManager})},reInitializeRegions:function(){this.regionManagers&&_.size(this.regionManagers)===0?this.initializeRegions():_.each(this.regionManagers,function(region){delete region.$el})},closeRegions:function(){var that=this;_.each(this.regionManagers,function(manager,name){manager.close()})},destroyRegions:function(){var that=this;_.each(this.regionManagers,function(manager,name){delete that[name]}),this.regionManagers={}}}),Marionette.Application=function(options){this.initCallbacks=new Marionette.Callbacks,this.vent=new Marionette.EventAggregator,this.submodules={};var eventBinder=new Marionette.EventBinder;_.extend(this,eventBinder,options)},_.extend(Marionette.Application.prototype,Backbone.Events,{addInitializer:function(initializer){this.initCallbacks.add(initializer)},start:function(options){this.trigger("initialize:before",options),this.initCallbacks.run(options,this),this.trigger("initialize:after",options),this.trigger("start",options)},addRegions:function(regions){var regionValue,regionObj,region;for(region in regions)regions.hasOwnProperty(region)&&(regionValue=regions[region],typeof regionValue=="string"?regionObj=new Marionette.Region({el:regionValue}):regionObj=new regionValue,this[region]=regionObj)},removeRegion:function(region){this[region].close(),delete this[region]},module:function(moduleNames,moduleDefinition){var args=slice.call(arguments);return args.unshift(this),Marionette.Module.create.apply(Marionette.Module,args)}}),Marionette.Application.extend=Backbone.View.extend,Marionette.AppRouter=Backbone.Router.extend({constructor:function(options){Backbone.Router.prototype.constructor.call(this,options);if(this.appRoutes){var controller=this.controller;options&&options.controller&&(controller=options.controller),this.processAppRoutes(controller,this.appRoutes)}},processAppRoutes:function(controller,appRoutes){var method,methodName,route,routesLength,i,routes=[],router=this;for(route in appRoutes)appRoutes.hasOwnProperty(route)&&routes.unshift([route,appRoutes[route]]);routesLength=routes.length;for(i=0;i<routesLength;i++){route=routes[i][0],methodName=routes[i][1],method=controller[methodName];if(!method){var msg="Method '"+methodName+"' was not found on the controller",err=new Error(msg);throw err.name="NoMethodError",err}method=_.bind(method,controller),router.route(route,methodName,method)}}}),Marionette.Module=function(moduleName,app,customArgs){this.moduleName=moduleName,this.submodules={},this._initializerCallbacks=new Marionette.Callbacks,this._finalizerCallbacks=new Marionette.Callbacks,this._config={},this._config.app=app,this._config.customArgs=customArgs,this._config.definitions=[];var eventBinder=new Marionette.EventBinder;_.extend(this,eventBinder)},_.extend(Marionette.Module.prototype,Backbone.Events,{addInitializer:function(callback){this._initializerCallbacks.add(callback)},addFinalizer:function(callback){this._finalizerCallbacks.add(callback)},start:function(options){this._runModuleDefinition(),this._initializerCallbacks.run(options,this),this._isInitialized=!0,this.submodules&&_.each(this.submodules,function(mod){mod.start()})},stop:function(){if(!this._isInitialized)return;this._isInitialized=!1,this._finalizerCallbacks.run(),_.each(this.submodules,function(mod){mod.stop()})},addDefinition:function(moduleDefinition){this._config.definitions.push(moduleDefinition)},_runModuleDefinition:function(){if(this._config.definitions.length===0)return;var args=_.flatten([this,this._config.app,Backbone,Marionette,$,_,this._config.customArgs]),definitionCount=this._config.definitions.length-1;for(var i=0;i<=definitionCount;i++){var definition=this._config.definitions[i];definition.apply(this,args)}}}),_.extend(Marionette.Module,{create:function(app,moduleNames,moduleDefinition){var that=this,parentModule=app,moduleNames=moduleNames.split("."),customArgs=slice.apply(arguments);customArgs.splice(0,3);var length=moduleNames.length;return _.each(moduleNames,function(moduleName,i){var isLastModuleInChain=i===length-1,module=parentModule[moduleName];module||(module=new Marionette.Module(moduleName,app,customArgs),parentModule[moduleName]=module,parentModule.submodules[moduleName]=module),isLastModuleInChain&&that._createModuleDefinition(module,moduleDefinition,app),parentModule=module}),parentModule},_createModuleDefinition:function(module,moduleDefinition,app){var moduleOptions=this._getModuleDefinitionOptions(moduleDefinition);moduleOptions.definition&&module.addDefinition(moduleOptions.definition),moduleOptions.startWithApp&&app.addInitializer(function(options){module.start(options)})},_getModuleDefinitionOptions:function(moduleDefinition){var options={startWithApp:!0};return moduleDefinition?(_.isFunction(moduleDefinition)?options.definition=moduleDefinition:(options.definition=moduleDefinition.define,moduleDefinition.hasOwnProperty("startWithApp")&&(options.startWithApp=moduleDefinition.startWithApp)),options):options}}),Marionette.TemplateCache=function(templateId){this.templateId=templateId},_.extend(Marionette.TemplateCache,{templateCaches:{},get:function(templateId){var that=this,cachedTemplate=this.templateCaches[templateId];return cachedTemplate||(cachedTemplate=new Marionette.TemplateCache(templateId),this.templateCaches[templateId]=cachedTemplate),cachedTemplate.load()},clear:function(){var i,length=arguments.length;if(length>0)for(i=0;i<length;i++)delete this.templateCaches[arguments[i]];else this.templateCaches={}}}),_.extend(Marionette.TemplateCache.prototype,{load:function(){var that=this;if(this.compiledTemplate)return this.compiledTemplate;var template=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(template),this.compiledTemplate},loadTemplate:function(templateId){var template=$(templateId).html();if(!template||template.length===0){var msg="Could not find template: '"+templateId+"'",err=new Error(msg);throw err.name="NoTemplateError",err}return template},compileTemplate:function(rawTemplate){return _.template(rawTemplate)}}),Marionette.Renderer={render:function(template,data){var templateFunc=Marionette.TemplateCache.get(template),html=templateFunc(data);return html}},Marionette.Callbacks=function(){this.deferred=$.Deferred(),this.promise=this.deferred.promise()},_.extend(Marionette.Callbacks.prototype,{add:function(callback,contextOverride){this.promise.done(function(context,options){contextOverride&&(context=contextOverride),callback.call(context,options)})},run:function(options,context){this.deferred.resolve(context,options)}}),Marionette.EventAggregator=Marionette.EventBinder.extend({constructor:function(options){Marionette.EventBinder.apply(this,arguments),_.extend(this,options)},bindTo:function(eventName,callback,context){return Marionette.EventBinder.prototype.bindTo.call(this,this,eventName,callback,context)}}),_.extend(Marionette.EventAggregator.prototype,Backbone.Events),Marionette.EventAggregator.extend=Backbone.View.extend;var slice=Array.prototype.slice;return Marionette}(Backbone,_,window.jQuery||window.Zepto||window.ender),Backbone.Marionette}),function(){define("krisbb",["jquery","underscore","marionette"],function($,_,Marionette){var KrisBB;return KrisBB=new Marionette.Application,KrisBB.bind("initialize:after",function(options){}),Backbone.history&&Backbone.history.start(),KrisBB})}.call(this),function(){require(["jquery","marionette","krisbb","common"],function($,Marionette,KrisBB){return Backbone.Marionette.TemplateCache.prototype.loadTemplate=function(templateId){var err,msg,template;template=templateId;if(!template||template.length===0)throw msg="Could not find template: '"+templateId+"'",err=new Error(msg),err.name="NoTemplateError",err;return template},$(function(){return KrisBB.start(window.settings,window.user)})})}.call(this),define("app",function(){})
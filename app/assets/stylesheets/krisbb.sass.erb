$usercolours: #0099CC, #562573, #FF8800, #669900, #99CC00

@mixin reset-fixed
  position: relative
  top: auto
  bottom: auto
  right: auto
  left: auto

html,
body
  margin: 0
  padding: 0
  width: 100%
  height: 100%

// GENERAL

#main
  position: fixed
  top: 60px
  left: 10px
  bottom: 0
  right: 10px

.user-menu
  img
    height: 20px

// Static user pages

table.users
  td
    vertical-align: middle

    &:last-child
      text-align: right

.user-messages
  margin-left: 160px
  min-height: 200px

  table
    td.message
      width: 100%

.user-controls
  float: left

// Main app

ul.messages
  position: fixed
  top: 60px
  left: 20px
  bottom: 60px
  right: 300px
  padding: 0
  overflow: auto


  li
    position: relative
    border-left: 2px solid #94A686
    border-bottom: 1px solid #282A2C
    padding: 0
    min-height: 50px
    margin-left: 2px

    @for $i from 1 through length($usercolours)
      $value: nth($usercolours, $i)
      &.user#{$i}
        border-left: 2px solid $value

    &:hover
      background: #000000
      margin-left: 0
      padding-left: 2px

    .username,
    .message,
    .time
      padding: 10px 5px

    .username
      padding: 5px
      float: left
      overflow: hidden
      width: 160px

      img
        height: 35px
        padding: 0 5px

    .message
      margin-left: 165px
      padding: 5px
      color: #EEE

    .time
      position: absolute
      padding: 5px
      top: 0
      right: 5px
      width: 125px
      color: #666
      font-size: 12px
      text-align: right

#send-message
  position: fixed
  height: 34px
  left: 20px
  bottom: 20px
  right: 300px

  button
    position: absolute
    right: 0
    width: 60px
    height: 35px

  #messagebox
    position: absolute
    left: 0
    right: 80px
    padding: 0
    margin: 0

    textarea
      width: 100%
      height: 20px
      padding: 5px
      font-size: 14px
      margin: 0

#sidebar
  position: fixed
  width: 240px
  top: 60px
  bottom: 0
  right: 20px

  .users

    li
      padding: 5px

      img
        height: 20px

.archivelink
  display: none

html.no-js
  width: auto
  height: auto

  body
    width: auto
    height: auto

    .dropdown-toggle
      display: none

    .dropdown-menu
      @include reset-fixed
      display: block
      float: none
      padding: 0
      margin: 0

      li
        float: left

    .navbar-fixed-top
      @include reset-fixed

    #main
      @include reset-fixed
      margin: 10px

      #sidebar
        display: none

      ul.messages,
      #send-message
        @include reset-fixed
        margin-top: 10px

      #send-message
        height: 75px

        button
          height: 75px

        textarea
          height: 60px

      .archivelink
        display: block
        padding: 20px
        font-size: 14px
        font-weight: bold
        text-align: center

        &:hover
          background: #000

@media (max-width: 480px)
  .navbar-fixed-top,
  .navbar-fixed-bottom
    margin-left: 0
    margin-right: 0

    .navbar-inner
      padding: 0

  #main
    margin: 5px 10px
    @include reset-fixed

  ul.messages
    right: 20px

  #send-message
    right: 20px

  #sidebar
    display: none

  .user-messages
    margin-left: 0
    min-height: 0

  .user-controls
    float: none

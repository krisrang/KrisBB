@import "compass"

$usercolours: #0099CC, #562573, #FF8800, #669900, #99CC00

@mixin avatar($max)
  width: $max
  max-height: $max

  img
    max-height: $max
    max-width: $max

body
  padding-top: 80px

.form-page
  margin: 0 auto
  width: 550px

.avatar
  display: inline-block
  text-align: center

  &.small
    @include avatar(35px)

  &.big
    @include avatar(140px)

  &.thumb
    @include avatar(20px)

table.users
  td
    vertical-align: middle

    &:last-child
      text-align: right

.archive-link
  display: block
  text-align: center
  padding: 10px
  margin-bottom: 20px
  font-weight: bold
  border: 1px solid #DDD
  @include border-radius(3px)

  &:hover
    text-decoration: none
    background: #0095CE
    color: #FFF

.messages
  li
    .avatar
      float: left
      padding: 0 5px

    .contents
      padding: 5px
      overflow: hidden
      word-wrap:  break-word

    .info
      margin-left: 40px
      padding: 0 10px

    .username
      color: #363636
      font-weight: bold

    .right
      float: right
      color: #888888
      font-size: 12px

    .delete-message
      display: none
      padding-right: 5px

    &:hover
      .delete-message
        display: inline

  &.archive
    li
      margin-bottom: 20px
      background: #FFFFFF
      padding-top: 10px
      border-top: 1px solid rgba(0,0,0,0.15)
      @include box-shadow(0px 2px 5px rgba(0,0,0,0.2))

      .avatar
        float: left
        padding: 0 5px

      .info
        margin-left: 40px
        padding: 0 10px

        .username
          color: #363636
          font-weight: bold

        .time
          color: #888
          font-size: 12px

      .contents
        padding: 15px 5px 5px 5px
        overflow: hidden
        word-wrap:  break-word

      .controls
        background: #F9F6F6
        font-size: 13px
        padding: 3px
        text-align: right 

      @for $i from 1 through length($usercolours)
        $value: nth($usercolours, $i)
        &.user#{$i}
          border-top: 1px solid rgba($value, 0.2)

  &.bb
    padding-bottom: 90px

    li
      border-top: 1px solid #EEEEEE
      position: relative
      min-height: 60px

      .avatar
        background: #EEEEEE

        &:after
          content: ""
          position: absolute
          top: 0
          left: 40px
          border-color: transparent
          border-style: solid
          border-width: 10px 10px 10px 0
          border-right-color: #FFFFFF

      .contents
        background: #FFFFFF

      .info
        background: #FFFFFF

      @for $i from 1 through length($usercolours)
        $value: nth($usercolours, $i)
        &.user#{$i}
          border-top-color: lighten($value, 40%)

#bb-userbar
  position: fixed
  top: 40px
  left: 0px
  right: 0px
  padding: 5px
  height: 20px
  background: rgba(0,0,0,0.75)

  .user-presence
    position: relative
    background: transparent url('/assets/onlinebg.png') no-repeat top center

    ul
      margin: 0

      li
        display: inline-block

        i.avatar
          background: #EEEEEE

.send-message
  position: fixed
  bottom: 0
  float: none
  height: 80px
  margin: 0 -10px
  padding: 10px
  background: #F5F4F2
  border-top: 1px solid #99CC00

  &.sending
    .message-controls
      .message-submit
        i.icon-comment
          display: none

        i.pending
          display: inline-block


  .message-controls
    height: 20px

    .allow-notifications
      display: none

    .message-control-bit
      float: right
      margin: 3px 5px 0 5px

      &.message-control-bit-left
        float: left
        margin: 3px 5px 0 0

      label
        font-size: 12px

    .message-submit
      width: 60px

      i.pending
        display: none

    .enter-toggle
      padding: 3px 0 0 3px

      label
        cursor: hand
        cursor: pointer
        display: inline

  .message-box
    margin-right: 20px

    textarea
      height: 45px
      width: 100%
      resize: none
      margin-bottom: 0

.user-show
  h4
    padding-bottom: 10px
    border-bottom: 1px solid #DDD

  .user-sidebar
    .avatar
      padding: 5px
      background: white
      @include box-shadow(0 1px 2px rgba(0, 0, 0, 0.15))
      border: 1px solid #DDD

    h2
      font-size: 26px
      letter-spacing: -1px
      color: #495961
      margin-top: 6px
      line-height: 26px
      text-overflow: ellipsis
      overflow-x: hidden
      padding-bottom: 4px

    .details
      border-top: 1px solid #DDD
      border-bottom: 1px solid #DDD
      margin: 0 0 8px 0
      padding: 18px 0 15px 0
      -webkit-font-smoothing: antialiased

      i
        color: #D0D0D0
        font-size: 16px
        width: 16px
        height: 16px

      span
        margin: 0 0 0 5px
        width: 160px
        overflow-x: hidden
        text-overflow: ellipsis

    ul.stats
      border-bottom: 1px solid #DDD
      margin: 0 0 17px 0
      padding: 6px 0 15px 0

      li
        display: inline-block
        list-style-type: none
        min-width: 70px

        a
          text-decoration: none

          &:hover
            strong, span
              color: #4183C4

          strong
            display: block
            font-size: 28px
            line-height: 1
            font-weight: bold
            color: #222

          span
            display: block
            margin-top: -2px
            font-size: 11px
            color: #999

  .user-messages
    .message
      border-bottom: 1px solid #DDD
      padding: 10px 5px
      overflow: hidden
      word-wrap:  break-word

      .label
        float: right

  .user-controls
    float: right

#stats-bar
  position: fixed
  bottom: 0
  left: 0
  padding: 3px 5px

  .contents
    display: none

  &:hover
    right: 0
    z-index: 2000
    font-size: 12px
    color: #FFFFFF
    background: rgba(0,0,0,0.7)

    .contents
      display: block

    .icon
      display: none

.no-js
  .alert
    .close
      display: none

@media (max-width: 600px)
  .form-page
    width: auto
    margin: 10px auto 0

@media (max-width: 767px)
  .user-show
    .user-controls
      float: none
      margin-bottom: 10px

  .send-message
    left: 0
    right: 0
    margin: 0
    box-sizing: content-box

    .message-controls
      margin-right: 20px

    .message-box
      margin-right: 100px

  body.bb
    .navbar-fixed-top
      margin-left: 0px
      margin-right: 0px

@media (max-width: 979px)
  body
    padding-top: 0

    #bb-userbar
      top: 50px

    &.bb
      padding-top: 90px

      .navbar-fixed-top
        position: fixed

